#!/bin/bash

# Function to show Dunst notification with progress bar
show_notification() {
    dunstify -u normal -r 1337 -t 2000 -i audio-volume-muted -h "string:x-dunst-stack-tag:volume" "Volume" "$1"
}

# Function to get current volume level
get_volume() {
    pactl list sinks | awk '/^[[:space:]]*Volume:/ {print $5; exit}' | tr -d '%'
}

# Function to adjust volume
adjust_volume() {
    pactl set-sink-volume @DEFAULT_SINK@ "$1"
    show_notification "Volume Adjusted to $(get_volume)%"
}

# Function to increase volume
increase_volume() {
    adjust_volume +5%
}

# Function to decrease volume
decrease_volume() {
    adjust_volume -5%
}

# Function to mute/unmute volume
toggle_mute() {
    pactl set-sink-mute @DEFAULT_SINK@ toggle
    if pactl list sinks | grep -q 'Mute: yes'; then
        show_notification "Volume Muted"
    else
        show_notification "Volume Unmuted"
    fi
}

# Check command line arguments
case "$1" in
    "-i") increase_volume ;;
    "-d") decrease_volume ;;
    "-m") toggle_mute ;;
    *) echo "Invalid argument. Usage: $0 {-i|-d|-m}" ;;
esac
